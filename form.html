<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./form.css" />
    <title>DDA Algoritm Canvas</title>
  </head>

  <body>
    <div class="formClass">
      <form name="form1">
        <span>DDA Algorithm</span>
        <div class="ddainput">
          <div class="input-box">
            <input type="text" name="x1" placeholder="Enter x1" />
          </div>
          <div class="input-box">
            <input type="text" name="y1" placeholder="Enter y1" />
          </div>
          <div class="input-box">
            <input type="text" name="x2" placeholder="Enter x2" />
          </div>
          <div class="input-box">
            <input type="text" name="y2" placeholder="Enter y2" />
          </div>
        </div>
        <div class="btn">
          <input type="button" value="Confirm" onclick="dda()" />
        </div>
      </form>
    </div>
    <canvas id="myCanvas" width="1670" height="1080"></canvas>
    <script>
      function dda() {
        var x0 = parseInt(document.form1.x1.value);
        var y0 = parseInt(document.form1.y1.value);
        var x1 = parseInt(document.form1.x2.value);
        var y1 = parseInt(document.form1.y2.value);
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        // var i=0;
        // var dem = (x<x1) ? x1-x : x-x1;
        ctx.beginPath();
        const dx = x1 - x0,
          dy = y1 - y0;
        var m = parseFloat(dy / dx);
        var x = x0,
          y = y0;
        while (!(x > x1)) {
          //setTimeout(ctx.fillRect(x, y, 1, 1), 1000);
          ctx.moveTo(x0, y0);
          ctx.lineTo(x, y);
          // var lap = setTimeout(function () {
            // i++;
            ctx.stroke();
            // start(i);
            // if (i=dem){
              // clearTimeout();
            // }
          // }, 5000);
          x = x + 1;
          y = y + m;
        }
      }

      function dda1(x0, y0, x1, y1) {
        const dx = x1 - x0,
          dy = y1 - y0,
          s = Math.abs(dx) > Math.abs(dy) ? Math.abs(dx) : Math.abs(dy),
          xi = (dx * 1.0) / s,
          yi = (dy * 1.0) / s;

        var x = x0,
          y = y0,
          out = [];

        out.push({ x: x0, y: y0 });

        for (var i = 0; i < s; i++) {
          x += xi;
          y += yi;
          out.push({ x: x, y: y });
        }

        return out;
      }

      function ddaFunction() {
        var x0 = parseInt(document.form1.x1.value);
        var y0 = parseInt(document.form1.y1.value);
        var x1 = parseInt(document.form1.x2.value);
        var y1 = parseInt(document.form1.y2.value);
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        ctx.beginPath();
        dda1(x0, y0, x1, y1).map((item, index) => {
          ctx.lineTo(item.x, item.y);
        });
        ctx.stroke();
      }
    </script>
  </body>
</html>
